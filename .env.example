# =============================================================================
# Semantic Code Agents - Environment Variables
# =============================================================================
#
# Copy this file to .env and modify the values as needed:
#   cp .env.example .env
#
# Alternatively, copy to ~/.context/.env for global settings across projects.
#
# Reference: docs/reference/env-vars.md
#
# Priority: env vars > config file (TOML) > defaults
# =============================================================================

# =============================================================================
# CORE CONFIGURATION
# =============================================================================

# Global timeout in milliseconds (default: 30000)
# SCA_CORE_TIMEOUT_MS=30000

# Maximum concurrent operations (default: 4)
# SCA_CORE_MAX_CONCURRENCY=4

# Maximum files being processed simultaneously
# SCA_CORE_MAX_IN_FLIGHT_FILES=10

# Maximum embedding batches in flight
# SCA_CORE_MAX_IN_FLIGHT_EMBEDDING_BATCHES=4

# Maximum database inserts in flight
# SCA_CORE_MAX_IN_FLIGHT_INSERTS=8

# Maximum chunks buffered before processing
# SCA_CORE_MAX_BUFFERED_CHUNKS=1000

# Maximum embeddings buffered before insertion
# SCA_CORE_MAX_BUFFERED_EMBEDDINGS=500

# Maximum characters per chunk (default: 2500)
# SCA_CORE_MAX_CHUNK_CHARS=2500

# -----------------------------------------------------------------------------
# Retry Configuration
# -----------------------------------------------------------------------------

# Maximum retry attempts (default: 3)
# SCA_CORE_RETRY_MAX_ATTEMPTS=3

# Base delay between retries in ms (default: 1000)
# SCA_CORE_RETRY_BASE_DELAY_MS=1000

# Maximum delay between retries in ms (default: 30000)
# SCA_CORE_RETRY_MAX_DELAY_MS=30000

# Jitter ratio as percentage 0-100 (default: 25)
# SCA_CORE_RETRY_JITTER_RATIO_PCT=25

# =============================================================================
# EMBEDDING CONFIGURATION
# =============================================================================

# Provider: OpenAI, VoyageAI, Gemini, Ollama, onnx, test
# SCA_EMBEDDING_PROVIDER=onnx
# EMBEDDING_PROVIDER=onnx

# Model name (provider-specific)
# SCA_EMBEDDING_MODEL=text-embedding-3-small
# EMBEDDING_MODEL=text-embedding-3-small

# Timeout in milliseconds
# SCA_EMBEDDING_TIMEOUT_MS=30000
# EMBEDDING_TIMEOUT_MS=30000

# Batch size for embedding requests (default: 100)
# SCA_EMBEDDING_BATCH_SIZE=100
# EMBEDDING_BATCH_SIZE=100

# Embedding dimension (must match model output)
# SCA_EMBEDDING_DIMENSION=384
# EMBEDDING_DIMENSION=384

# Base URL for embedding API (http/https only)
# SCA_EMBEDDING_BASE_URL=https://api.openai.com/v1
# EMBEDDING_BASE_URL=https://api.openai.com/v1

# Prefer local embeddings when available
# SCA_EMBEDDING_LOCAL_FIRST=true
# EMBEDDING_LOCAL_FIRST=true

# Use only local embeddings (no remote API calls)
# SCA_EMBEDDING_LOCAL_ONLY=false
# EMBEDDING_LOCAL_ONLY=false

# Allow fallback to test embeddings when ONNX assets are missing
# SCA_EMBEDDING_TEST_FALLBACK=true
# EMBEDDING_TEST_FALLBACK=true

# Generic embedding API key (secret - never commit real values)
# SCA_EMBEDDING_API_KEY=your-embedding-api-key-here
# EMBEDDING_API_KEY=your-embedding-api-key-here

# -----------------------------------------------------------------------------
# ONNX Local Embedding Configuration
# -----------------------------------------------------------------------------

# Directory containing ONNX model files
# SCA_EMBEDDING_ONNX_MODEL_DIR=.context/models/onnx/Xenova-all-MiniLM-L6-v2
# EMBEDDING_ONNX_MODEL_DIR=.context/models/onnx/Xenova-all-MiniLM-L6-v2

# ONNX model filename
# SCA_EMBEDDING_ONNX_MODEL_FILENAME=model_quantized.onnx
# EMBEDDING_ONNX_MODEL_FILENAME=model_quantized.onnx

# Tokenizer filename
# SCA_EMBEDDING_ONNX_TOKENIZER_FILENAME=tokenizer.json
# EMBEDDING_ONNX_TOKENIZER_FILENAME=tokenizer.json

# HuggingFace repo for auto-download
# SCA_EMBEDDING_ONNX_REPO=Xenova/all-MiniLM-L6-v2
# EMBEDDING_ONNX_REPO=Xenova/all-MiniLM-L6-v2

# Auto-download model if missing
# SCA_EMBEDDING_ONNX_DOWNLOAD=true
# EMBEDDING_ONNX_DOWNLOAD=true

# ONNX session pool size
# SCA_EMBEDDING_ONNX_SESSION_POOL_SIZE=4
# EMBEDDING_ONNX_SESSION_POOL_SIZE=4

# -----------------------------------------------------------------------------
# Embedding Cache Configuration
# -----------------------------------------------------------------------------

# Enable in-memory embedding cache
# SCA_EMBEDDING_CACHE_ENABLED=true

# Maximum cache entries
# SCA_EMBEDDING_CACHE_MAX_ENTRIES=10000

# Maximum cache size in bytes
# SCA_EMBEDDING_CACHE_MAX_BYTES=104857600

# Enable disk-based cache persistence
# SCA_EMBEDDING_CACHE_DISK_ENABLED=false

# Disk cache file path
# SCA_EMBEDDING_CACHE_DISK_PATH=.context/cache/embeddings.db

# Disk cache provider: sqlite, postgres, mysql, mssql
# SCA_EMBEDDING_CACHE_DISK_PROVIDER=sqlite

# Disk cache connection string
# SCA_EMBEDDING_CACHE_DISK_CONNECTION=sqlite://.context/cache/embeddings.db

# Disk cache table name
# SCA_EMBEDDING_CACHE_DISK_TABLE=embedding_cache

# Maximum disk cache size in bytes
# SCA_EMBEDDING_CACHE_DISK_MAX_BYTES=1073741824

# =============================================================================
# PROVIDER-SPECIFIC CONFIGURATION
# =============================================================================

# -----------------------------------------------------------------------------
# OpenAI
# -----------------------------------------------------------------------------

# OpenAI API key (secret - never commit real values)
# OPENAI_API_KEY=sk-your-openai-api-key-here

# OpenAI base URL (optional, for custom endpoints or proxies)
# OPENAI_BASE_URL=https://api.openai.com/v1

# OpenAI model override
# OPENAI_MODEL=text-embedding-3-small

# -----------------------------------------------------------------------------
# Gemini
# -----------------------------------------------------------------------------

# Google Gemini API key (secret - never commit real values)
# GEMINI_API_KEY=your-gemini-api-key-here

# Gemini base URL
# GEMINI_BASE_URL=https://generativelanguage.googleapis.com/v1beta

# Gemini model override
# GEMINI_MODEL=text-embedding-004

# -----------------------------------------------------------------------------
# VoyageAI
# -----------------------------------------------------------------------------

# VoyageAI API key (secret - never commit real values)
# VOYAGEAI_API_KEY=your-voyageai-api-key-here

# VoyageAI base URL
# VOYAGEAI_BASE_URL=https://api.voyageai.com/v1

# VoyageAI model override
# VOYAGEAI_MODEL=voyage-code-2

# -----------------------------------------------------------------------------
# Ollama (Local)
# -----------------------------------------------------------------------------

# Ollama model name
# OLLAMA_MODEL=nomic-embed-text

# Ollama host URL
# OLLAMA_HOST=http://localhost:11434

# =============================================================================
# VECTOR DATABASE CONFIGURATION
# =============================================================================

# Provider: milvus, qdrant, lancedb
# SCA_VECTOR_DB_PROVIDER=milvus

# Index mode: dense (vector only) or hybrid (vector + BM25)
# SCA_VECTOR_DB_INDEX_MODE=dense

# Timeout in milliseconds
# SCA_VECTOR_DB_TIMEOUT_MS=30000

# Batch size for vector operations
# SCA_VECTOR_DB_BATCH_SIZE=100

# Base URL for vector database
# SCA_VECTOR_DB_BASE_URL=http://localhost:19530

# -----------------------------------------------------------------------------
# Milvus / Zilliz Cloud
# -----------------------------------------------------------------------------

# Milvus server address
# MILVUS_ADDRESS=your-zilliz-cloud-public-endpoint

# Milvus authentication token (secret - never commit real values)
# MILVUS_TOKEN=your-zilliz-cloud-api-key

# =============================================================================
# SYNC CONFIGURATION
# =============================================================================

# Allowed file extensions (CSV, normalized: trim, strip leading ./*, lowercase, dedupe)
# Example: .rs,.py,.ts,.js,.md
# SCA_SYNC_ALLOWED_EXTENSIONS=.rs,.py,.ts,.js,.jsx,.tsx,.md,.toml,.json,.yaml,.yml

# Ignore patterns (CSV, normalized: trim, / separators, dedupe)
# Example: target/**,node_modules/**,.git/**
# SCA_SYNC_IGNORE_PATTERNS=target/**,node_modules/**,.git/**,dist/**,build/**

# Maximum number of files to sync
# SCA_SYNC_MAX_FILES=10000

# Maximum file size in bytes (default: 1MB)
# SCA_SYNC_MAX_FILE_SIZE_BYTES=1048576

# =============================================================================
# DEVELOPMENT & TESTING
# =============================================================================

# E2E test fixture repository path
# SCA_E2E_FIXTURE_REPO=tmp/dspy/dspy

# Code splitter type: ast, langchain
# SPLITTER_TYPE=ast

# Enable hybrid search mode (dense + BM25)
# HYBRID_MODE=false

# Additional file extensions beyond defaults (comma-separated)
# CUSTOM_EXTENSIONS=.vue,.svelte,.astro

# Additional ignore patterns (comma-separated)
# CUSTOM_IGNORE_PATTERNS=temp/**,*.backup,private/**
